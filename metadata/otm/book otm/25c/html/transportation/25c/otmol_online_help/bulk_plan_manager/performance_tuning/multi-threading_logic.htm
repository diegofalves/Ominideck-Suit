<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, user-scalable=yes">
  <meta name="version" content="2022.3.0">
  <link rel="StyleSheet" href="../../template/styles/topic.min.css" type="text/css">
  <link rel="StyleSheet" data-skin="true" type="text/css" href="../../template/bluelagoon_-_redwood/layout.css">
  <link rel="StyleSheet" data-skin="true" href="../../template/bluelagoon_-_redwood/userstyles.css" type="text/css">
  
  <script data-relpath="../.." src="../../template/scripts/csh-redirect.js" type="text/javascript"></script>
<link rel="StyleSheet" href="../../assets/css/redwood.css" type="text/css">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="topic-status" content="Complete">
  <meta name="topic-priority" content="0">
  <meta name="topic-time-estimate" content="0">
  <meta name="topic-comment" content>
  <meta name="topic-id" content="integration\actions\message_hub_actions.htm">
  <meta name="template" content="../../assets/masterpages/operational planning.htt">
  <meta http-equiv="Content-Language" content="en-US">
  <meta name="generator" content="Adobe RoboHelp 2022">
  <title>Multi-threading Logic in OTM</title>
  <link rel="StyleSheet" href="../../assets/css/redwood.css" type="text/css">
  <script type="text/javascript" language="JavaScript1.2" src="../../assets/js/feedback.js"></script>
  <meta name="rh-index-keywords" content="multi-threading logic">
<meta name="rh-version" content="2022.6.34"><meta name="description" content><meta name="brsnext" value="bulk_plan_manager/performance_tuning/bulk_plan_partitioning.htm"><meta name="brsprev" value="bulk_plan_manager/performance_tuning/bulk_plan_multi-threading.htm">
  
  
  
  
  <style>
  </style>
  <link rel="stylesheet" type="text/css" href="../../assets/css/redwood.css">
<meta name="rh-version" content="2022.6.34">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.created" content="2025-07-16T17:04:07+00:00">
    <meta name="dcterms.title" content="Online Help for Transportation and Global Trade Management">
    <meta name="dcterms.category" content="cloud">
    <meta name="dcterms.isVersionOf" content="OTMOL">
    <meta name="dcterms.product" content="en/cloud/saas/transportation/25c">
    <meta name="dcterms.identifier" content="G28971-02">
    <meta name="dcterms.release" content="Release 25C">
  <script id="ssot-metadata" type="application/json">{"primary":{"category":{"short_name":"cloud","element_name":"Cloud","display_in_url":true},"suite":{"short_name":"saas","element_name":"Cloud Applications","display_in_url":true},"product_group":{"short_name":"supply-chain-management","element_name":"Supply Chain Management","display_in_url":false},"product":{"short_name":"transportation","element_name":"Transportation and Global Trade Management Cloud","display_in_url":true},"release":{"short_name":"25c","element_name":"Release 25C","display_in_url":true}}}</script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"WebPage","name":"Multi-threading Logic in OTM","description":"","datePublished":"2025-07-16 CST","dateModified":"2025-07-16 CST"}</script>
    <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>

<body class="rh-BODY-wrapper">
  <div class="cookie-widget-holder" id="cookie-status-widget-holder"></div>
  <div class="RH-LAYOUT-HEADER-skip-content-container" id="skip-to-content"></div>
  <header class="RH-LAYOUT-HEADER-container" role="banner">
    <div class="RH-LAYOUT-HEADER-logo-box  ">
      <div class="RH-LAYOUT-HEADER-logo" id="logo-holder"></div>
      <div class="RH-LAYOUT-HEADER-title" id="topic-title-holder"></div>
    </div>
    <div class="RH-LAYOUT-HEADERMENU-container" id="header-menu"></div>
    <div class="search-placeholder-class" id="search-with-help"></div>
  </header>
  <main role="main" class="RH-LAYOUT-BODY-container">
    <div class="RH-LAYOUT-SEARCHRESULTS" id="rh-searchresults"></div>
    <div class="RH-LAYOUT-LEFTPANEL-container" id="rh-leftpanel"></div>
    <div class="rh-layout-BODY-main" id="rh-layout-main">
      <div class="RH-LAYOUT-TOOLBAR-toolbar-box" id="rh-toolbar"></div>
      <div class="rh-layout-BODY-body">
        <div class="RH-LAYOUT-CENTERPANEL-container">
          <div class="rh-layout-selectdetails" id="rh-selectdetails"></div>
          <div class="RH-LAYOUT-CENTERPANEL-topic-box" id="rh-topic">
  <div>
    <p class="Header">Operational Planning</p>
  </div>
  <div><noscript>
    If you have any questions or comments about this topic or the online help,
    please <a href="mailto:otm-doc_us@oracle.com?subject=Documentation feedback:OTM Help">contact
      us.</a>
  </noscript>
  <h1><span data-field="title" data-format="default">Multi-threading Logic in OTM</span></h1>
  <div role="main">
    <p>There are several properties that control how the batches are created and run inside the bulk plan and other processes.Â In order to understand and effectively use <a href="bulk_plan_multi-threading.htm">multi-threading</a>, it is important to understand how OTMâs multi-threading logic works.Â Here the example of a multi-threaded bulk plan is used.</p>
    <p>The inputs to the multi-threading logic are:</p>
    <ul>
      <li>Number of tasks</li>
      <li>Number of threads in the topic group</li>
      <li>Desired batch size (a number or QUEUE)</li>
      <li>Parallel threshold</li>
      <li>Minimum batch size</li>
    </ul>
    <p>The value of &quot;Number of tasks&quot; will depend on the bulk plan data (i.e. number of orders, ship unit counts etc.), whereas you can select the values for the remaining items.</p>
    <p>The multi-threading logic takes the input parameter and determines the following:</p>
    <ul>
      <li>Whether the tasks should run in the caller thread. If yes, the tasks will be run single-threaded, otherwise batches of tasks will be created and run in parallel threads.</li>
      <li>Number of batches to use</li>
      <li>Tasks in each batch (Most batches have the same number of tasks, with the last one possibly having fewer tasks.)</li>
      <li>Whether or not to run the tasks in the caller</li>
    </ul>
    <h2><a name="High_Level_Logic" id="High_Level_Logic"></a>High Level Logic</h2>
    <p>In order to describe the high level logic, we will use the following sample inputs:</p>
    <ul>
      <li>Number of tasks: 10000</li>
      <li>Average runtime per task: 1 time unit</li>
      <li>Number of threads: 20</li>
      <li>Desired batch size: QUEUE</li>
      <li>Parallel Threshold: 2</li>
      <li>Minimum Batch Size: 800</li>
    </ul>
    <h3>Step 1: Determine the number of batches</h3>
    <p>Typically, the number of batches is the same as the number of threads. However, given a minimum batch size, there might not be enough tasks to use up all of these threads.Â Based on the number of tasks and the minimum batch size, the number of batches is computed as Number of tasks / Minimum Batch Size (10000 / 800 = 12). Thus the total number of batches is 12, even though there are 20 threads.</p>
    <h3>Step 2: Determine the batch size</h3>
    <p>If the desired batch size is QUEUE, the batch size is determined by dividing the number of tasks by the number of threads in the topic group. If the batch size is greater than the minimum batch size, then the batch size is set to the minimum.</p>
    <p>In the example above, the batch size is determined by dividing the number of tasks by the number of threads (10000 / 20 = 500). However, since the minimum batch size is set at 800, and the computed number of batches is 12, the revised batch size is 10000 / 12 = 833.</p>
    <h3>Step 3: Determine if the batches should be run in caller thread</h3>
    <p>If the number of batches determined in step 1 is smaller than the parallel threshold value, then all the tasks will be run in the caller thread. Otherwise, the batches will be queued up to be run on multiple threads in parallel.</p>
    <p>In this example, the number of batches (12) is greater than the parallel threshold (2) so the batches will be queued up to run on 12 threads.</p>
    <h3>General Comments</h3>
    <p>While multi-threading helps process tasks in parallel, it is not normal to get 100% parallelism. If there are 10 tasks, each taking 1 time unit, and they are run in parallel using 10 threads, it is not typical to see the run time of 1 unit. It is almost always higher. This is due to unavoidable thread contentions that require synchronized blocks or sequential processing.Â </p>
    <p>Moreover, the tasks themselves are not always uniform in that their processing times are different from each other. Hence, even though the batches have the same number of tasks, their loads may be quite different.</p>
    <p>Given that a topic group containing a certain number of threads can be shared across multiple bulk plan runs, the individual computations on the number of batches and batch size is still based on the total number of threads even though some of the threads may be busy processing tasks for other bulk plans. Hence, this might result in longer wait times for the threads to be freed up.</p>
  </div>
  <h2><a name="related_topics" id="related_topics"></a>Related Topics</h2>
  <p class="LinkList"><a href="bulk_plan_multi-threading.htm">Bulk Plan Multi-threading</a></p>
  <p class="LinkList"><a href="../bulk_plan_performance_and_tuning.htm">Bulk Plan Performance and Tuning Overview</a></p>
  <p class="LinkList"><a href="bulk_plan_performance_tuning.htm">Bulk Plan Performance Tuning</a></p>
  <p class="LinkList"><a href="../../assets/docs/bulk_plan_performance_and_tuning_guide.pdf">Bulk Plan Performance and Tuning PDF</a></p>
  <p class="LinkList"><a href="../../properties/glog/thread.property.htm">glog.thread Property</a></p>
  <p class="LinkList"><a href="../../procurement/rate_maintenance/rate_maintenance_multi-threading.htm">Rate Maintenance Multi-threading</a></p>
  <script type="text/javascript" language="JavaScript1.2">
    //<![CDATA[
    if (typeof(InitEffects) != 'function') InitEffects = new Function();
    InitEffects('P1');
    //]]>
  </script>

</div>
  <div>
    <hr align="center">
    <p class="Footer"><img align="right" alt="Was this page helpful? Click to send feedback." height="49" src="../../assets/images/feedback.png" style="font-family: &quot;Oracle Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: medium;" usemap="#imagemap" width="322"><map data-img-height="49" data-img-width="322" name="imagemap"><area alt="How can we improve this page?" coords="222, 1, 265, 43" href="javascript:sendDownFeedback()" shape="rect" title="How can we improve this page?"><area alt="What did you like about this page?" coords="273, 4, 317, 45" href="javascript:sendUpFeedback()" shape="rect" title="What did you like about this page?"><area alt="Comments" coords="41, 3, 218, 45" href="javascript:sendFeedback()" shape="rect" title="Comments"></map></p>
  </div>

</div>
          <div class="RH-LAYOUT-BRS-container" id="rh-brs"></div>
        </div>
        <div class="RH-LAYOUT-RIGHTPANEL-container" id="rh-rightpanel"></div>
      </div>
    </div>
  </main>
  <footer role="contentinfo" class="RH-LAYOUT-FOOTER-container" id="rh-footer">
  <table border="0" cellpadding="1" cellspacing="1" class="table-unstyled">
    <tbody>
      <tr>
        <td style="background-color:#312D2A">
          <p class="Footer">Other Documentation Resources</p>
          <p class="Footer"><a href="https://docs.oracle.com/pls/topic/lookup?ctx=otm-latest&amp;id=otm-gs" target="_blank" title="Transportation and Global Trade Management Library">Help Center &amp; Guides</a>Â â¢ <a href="https://support.oracle.com/support/?documentId=KB153929" target="_blank" title="My Oracle Support">Extra Documents</a>Â â¢Â <a href="https://support.oracle.com/support/?documentId=KA171" target="_blank" title="Information Center">Information Center</a></p>
        </td>
        <td style="background-color:#312D2A">
          <p class="Footer"><a href="../../general/cpyr.htm">CopyrightÂ Â© 2001, <span data-field="date" data-format="YYYY">2025</span>, Oracle and/or its affiliates.</a></p>
        </td>
        <td style="background-color:#312D2A">
          <p class="Footer">Contact Oracle</p>
          <p class="Footer"><a href="https://support.oracle.com" target="_blank">Contact Support</a> â¢ <a class="footer" href="javascript:sendFeedback()" target="_blank" title="Report an issue in the help or guides">Contact Documentation</a></p>
        </td>
      </tr>
    </tbody>
  </table>

</footer>
  <script type="text/javascript">//<![CDATA[

    gRootRelPath = "../.."
    gCommonRootRelPath = "../.."
    gTopicId = "31.3.6.0_4"
  
//]]></script>


  <script src="../../template/scripts/topicpage.js"></script>
  <script src="../../whxdata/layoutconfig.js"></script>
  <script src="../../whxdata/brsdata.js"></script>

  
    
      
          

            
              
                <link rel="StyleSheet" href="../../template/bluelagoon_-_redwood/custom.css" type="text/css">
                
                  


</body></html>